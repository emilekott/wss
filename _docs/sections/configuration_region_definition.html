<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<title>.:: Ceon :: Zen Cart :: Module  :: advshipper ::.</title>
	<style type="text/css">
	/*<![CDATA[*/
	@import url(../_css/inc.css.layout_styles.css);
	@import url(../_css/inc.css.styles.css);
	/*]]>*/
	</style>
	<link href="../_css/inc.css.layout_styles_print.css" type="text/css" media="print" />
	<script src="../_javascript/inc.js.general_functions.js" type="text/javascript"></script>
	<script src="../_javascript/inc.js.css_functions.js" type="text/javascript"></script>
	<script src="../_javascript/inc.js.restrict_width.js" language="javascript" type="text/javascript"></script>
</head>

<body><a name="top" id="top"></a>

<script language="JavaScript" type="text/javascript"> 
<!-- 
// Script resizes main div if client window is larger than a predefined variable
var restrict_width = new CeonRestrictWidth(360, 900);
// -->
</script>

<div id="grad_horiz_left">
	<div id="grad_horiz_right">

<h1 class="Title">advshipper</h1>
<p class="TitleByLine">probably the best Zen Cart Shipping Module in the world! ...ever!</p>
<ul class="MainMenu">
	<li><a href="../index.html">Overview</a><span> | </span></li>
	<li><a href="essential_info.html">Essential Info</a><span> | </span></li>
	<li><a href="features.html">Features</a><span> | </span></li>
	<li><a href="revision_history.html">Revision History</a><span> | </span></li>
	<li><a href="installation.html">Installation</a><span> | </span></li>
	<li><a href="configuration.html">Configuration</a><span> | </span></li>
	<li><a href="upgrading.html">Upgrading</a><span> | </span></li>
	<li><a href="faqs.html">FAQs</a><span> | </span></li>
	<li><a href="support.html">Support</a><span> | </span></li>
	<li><a href="known_issues.html">Known Issues</a></li>
</ul>

<h2><a name="configuration" id="configuration"></a>Region Configuration - Region Definition</h2>
<p>The <em>rate</em> applied for a <em>method</em> is determined by first identifying which <em>region</em> the customer's shipping address is in and then by calculating the <em>rate</em> based on the <em class="ConfigurationOption">table of rates</em> for that <em>region</em>.</p>
<p>This section covers the <em>definition</em> of a <em>region</em>, the next describes the <em class="ConfigurationOption">table of rates</em>.</p>


<h4 class="UnderlinedTitle"><a name="region_title"></a>Region Admin Title</h4>
<p>This is the <em class="ConfigurationOption">Title</em> of the <em>region</em> that will be displayed alongside the <em>region</em>'s number in the admin. It is intended simply to be used to aid in the configuration of the store's <em>region</em>s, allowing quick and easy identification of the various <em>regions</em> for a <em>method</em> by a descriptive name.</p>


<h4 class="UnderlinedTitle"><a name="region_title"></a>Region Title</h4>
<p>This is a <em class="ConfigurationOption">Title</em> for the <em>region</em> that can be placed in the <em>method's title</em> using the placement tag {region_title}.</p>
<p>If it is empty, no <em>region title</em> can be placed in the <em>method title</em>.</p>


<h4 class="UnderlinedTitle"><a name="definition_method"></a>Definition Method</h4>
<p>Each individual <em>region</em> is defined in the module's admin configuration in either of two ways:</p>
<ol>
	<li>
		<h5>Geolocation</h5>
		<p>A <em>region</em> can be defined as being within a certain distance from the store (in Km/Miles).</p>
	</li>
	<li>
		<h5>Address Matching</h5>
		<p>A <em>region</em> can be defined as being a particular <em>Country</em> or a <em>Country and Postcode Range</em> combination.</p>
		<p>If the <a href="http://dev.ceon.net/web/zen-cart/advshipper_localities" target="_blank">Advanced Shipper Localities module</a> is installed, a <em>region</em> can also be defined as being a <em>Country and City</em> combination or a <em>Country and State</em> combination. It can even be defined as a combination of any or all of the available <em>address matching</em> options (For example: A <em>region</em> could be defined as a particular <em>City</em> and some specific outlying <em>Postcode</em> areas).</p>
		<p>If the <a href="http://dev.ceon.net/web/zen-cart/advshipper_zones" target="_blank">Advanced Shipper Zones module</a> is installed, a <em>region</em> can also be defined as being a <em>Country and Zone</em> combination, making use of Zen Cart <em>Zones</em>. It can even be defined as a combination of any or all of the available <em>address matching</em> options (For example: A <em>region</em> could be defined as a particular <em>Zone</em> and some specific outlying <em>Postcode</em> areas or additional <em>Cities</em> (if the Localities module was also installed.)).</p>
	</li>
</ol>
<p class="Note">The <em>region</em> a customer's address is in is determined on a <strong>&ldquo;first region to match&rdquo;</strong> basis, so <strong>great care has to be taken in the planning of the order of the <em>region</em> definitions</strong>!
<br />
<br />The <strong>first</strong> <em>region</em>s should have the <strong>most specific</strong> definitions, allowing the <strong>latter</strong> <em>region</em>s to act as &ldquo;catch-alls&rdquo;/&ldquo;fallbacks&rdquo; which cover any addresses that are <strong>not covered</strong> by any of the previous regions.
<br />
<br />More information about the importance of the order of <em>region definitions</em> can be found in the section <a href="#ordering_regions">Ordering Regions</a> below.</p>


<h4 class="UnderlinedTitle"><a name="geolocation"></a>Geolocation</h4>
<p>If geolocation support has been created for the country the store's shipping address is in (AU, UK or US), specific shipping <em>rate</em>s can be set up for customers whose addresses are within a certain distance of the store's shipping address.</p>
<p>Configuring a <em>region</em> for geolocation is simple. The only option to be configured is the value for the <em class="ConfigurationOption">Distance From Store</em>. This will be in Km or Miles depending upon the national unit for the country the store's shipping address is in. (For the UK and the US this is miles, for Australia this is Km).</p>


<h4 class="UnderlinedTitle"><a name="address_matching"></a>Address Matching</h4>
<p>Address Matching enables the defining of a <em>region</em> in terms of parts of a customer's address. It is a very flexible mechanism which can make use of a customer's <em>Country</em> and <em>Postcode</em> to determine if their address is in the <em>region</em>.</p>
<p>(<em>Country and City</em> matching, <em>Country and State</em> matching and <em>Country and Zone</em> matching are only available if the appropriate expansion modules are installed).</p>

<h5>Country Matching</h5>
<p>If a <em>region</em> is to be defined as being an entire <em>country</em>, the <em>country</em> to match against is specified using its two letter ISO code. For example, for the United States:</p>
<p class="Example">US</p>
<p>A <em>region</em> can also be defined as being a group of <em>countries</em>, simply by separating each definition with a comma (&lsquo;,&rsquo;).</p>
<p>For example, the following will match the US, Canada and Mexico:</p>
<p class="Example">US,CA,MX</p>


<h5>Countries/Postcodes Matching</h5>
<p>Much more fine-grained control of the <em>definition</em> of a <em>region</em> can be employed by specifying a <em>Postcode Range</em> to match within a <em>country</em>.</p>
<p>Valid <em>Postcode Ranges</em> are specified by defining the first part of the <em>postcode</em> which the equivalent part of the customer's <em>postcode</em> must match.</p>

<p>The <em>Postcode Range</em> to be matched against must be preceded by the <em>Country Code</em> the <em>Postcode Range</em> is in, followed by a colon &lsquo;:&rsquo;.</p>
<p>For example, all <em>postcodes</em> in Northern Ireland begin with &ldquo;BT&rdquo;, so a <em>region</em> would be defined as being Northern Ireland as follows:</p>
<p class="Example">GB:BT
<br />
<br />This defines a <em>region</em> that is within the UK - <em>country code</em> &ldquo;GB&rdquo; - and includes anyone whose <em>postcode</em> begins with &ldquo;BT&rdquo; - all Northern Irish addresses!.</p>
<p>For certain <em>countries</em> this can be extended to specifying a numerical range for the <em>postcode</em> by specifying the starting and ending digits to match, separated by a dash (&lsquo;-&rsquo;). For other <em>countries</em>, a range may be specified which may be alphabetic or even alphanumerical; it depends entirely on the format of <em>postcodes</em> for the <em>country</em> in question!</p>

<p>For example:</p>
<p class="Example">GB:PA20-49
<br />
<br />This defines a <em>region</em> that is within the UK and includes anyone whose <em>postcode</em> begins with &ldquo;PA&rdquo;, and then any number within the range &ldquo;20&rdquo;-&ldquo;49&rdquo;.
<br />
<br />PA20 4FT, PA23 6FJ and PA44 6TX would all be part of the <em>region</em>, but PA7 4FT, PA19 4FT and PA50 4FT would not.</p>
<p>As a further example:</p>
<p class="Example">US:980-994
<br />
<br />In the US the range of zip codes which match addresses in Washington state begin with the digits 980-994, so for a <em>region</em> to match any address in Washington state, the above would be entered and would match zip codes such as 98023, 99120 and 99400, but not 97800 or 99523.</p>

<p>Of course, a <em>region</em> doesn't have to be defined as being simply one set of <em>postcode ranges</em>, multiple <em>postcode ranges</em> can be used to define a <em>region</em> by separating each definition with a comma (&lsquo;,&rsquo;).</p>

<p>For example, to define a region as being &ldquo;The outlying Islands of the UK - Isle of Man, Guernsey, Jersey and the Isles of Scilly&rdquo;:</p>
<p class="Example">GB:IM,GB:GY,GB:JE,GB:TR21-25
<br />
<br />&ldquo;GB:IM&rdquo; matches all &ldquo;Isle of Man&rdquo; <em>postcodes</em>, &ldquo;GB:GY&rdquo; matches all &ldquo;Guernsey&rdquo; <em>postcodes</em>, &ldquo;GB:JE&rdquo; matches all &ldquo;Jersey&rdquo; <em>postcodes</em> and &ldquo;GB:TR21-25&rdquo; matches all &ldquo;Isles of Scilly&rdquo; <em>postcodes</em>.</p>

<p>A mixture of <em>countries</em> and <em>country/postcode range combinations</em> can also be used.</p>
<p>For example, to match the State of &ldquo;Texas&rdquo; and the <em>country</em> of &ldquo;Mexico&rdquo;:</p>
<p class="Example">US:75-79,MX
<br />
<br />&ldquo;US:75-79&rdquo; matches all <em>zip codes</em> in &ldquo;Texas&rdquo; and &ldquo;MX&rdquo; matches &ldquo;Mexico&rdquo;.</p>

<p class="ConfigurationNote"><a href="configuration_appendix_b.html">Example Postcode Ranges</a> for each country supported by this module are given in Appendix B.</p>



<h5>Negators</h5>
<p>Negators (&lsquo;!&rsquo;) can be used to specify that a particular <em>Postcode Range</em> is <strong>not</strong> in a region. Using it will remove the specified <em>Postcode Range</em> from the <em>region</em> altogether!</p>
<p>For example, if the courier shipped to everywhere in the UK except Northern Ireland (which too many do, unfortunately for us!), then a UK shipping <em>region</em> could be set up as:</p>
<p class="Example">GB:!BT,GB
<br />
<br />Northern Ireland is any <em>postcode</em> within the UK beginning with &ldquo;BT&rdquo;, so placing the negation symbol &lsquo;!&rsquo; before &ldquo;BT&rdquo; makes this definition read as:
<br />
<br />&ldquo;Discount any address within the UK beginning with postcode &lsquo;BT&rsquo;, but include any other address in the UK&rdquo;.</p>

<p>Please note that negators must be defined <strong>before</strong> fallback/catch-all definitions.</p>
<p>An example of using negators incorrectly:</p>
<p class="Example">GB,GB:!BT
<br />
<br />With this incorrect definition, Northern Ireland would be included in this <em>region</em> as any address in the UK would match &ldquo;GB&rdquo; and therefore the &ldquo;GB:!BT&rdquo; definition would never be evaluated.</p>



<h5>Wildcards</h5>
<p>The asterix symbol (&lsquo;*&rsquo;) is a special wildcard that can be used to match <strong>any</strong> address, so it can be used as a catch-all, if necessary.</p>
<p>It is primarily intended to be used to match <strong>all</strong> <em>countries</em> - in a fallback capacity - by using it as the definition for the last <em>region</em> to be defined. For example:</p>
<p class="Example">If <em>Region</em> 1 is defined as &ldquo;<strong>GB,FR,IE</strong>&rdquo; and <em>Region</em> 2 is defined as &ldquo;<strong>IT,DE</strong>&rdquo; and <em>Region</em> 3 is defined as &ldquo;<strong>*</strong>&rdquo; then <em>Region</em> 3 will match every country in the world except the UK (GB), France (FR), Ireland(IE), Italy (IT) and Germany (DE). It can be used as a &ldquo;Rest of the World&rdquo; option.</p>
<p><em>Negators</em> can be used for <em>country codes</em> when combined with a <em>wildcard</em>.</p>
<p>For example, to set up an &ldquo;International Shipping&rdquo; <em>region</em> for &ldquo;Outside the US &amp; Canada&rdquo;:</p>
<p class="Example">!US,!CA,*
<br />
<br />The <em>negators</em> disallow this <em>method</em> for shipping to the US or Canada, and the <em>wildcard</em> allows all other <em>countries</em> to match.</p>

<h4 class="UnderlinedTitle"><a name="ordering_regions"></a>Ordering Regions: An Essential Point</h4>
<p>The most important point to take note of is that the <strong>order of the <em>region</em> definitions is essential</strong>. The more specific <em>region</em> definitions should come before the less specific ones.</p>
<p>For example, if setting up a special rate for postage to Essex versus the rest of the UK:</p>
<p class="Example"><em>Region</em> 1 should have a <em class="ConfigurationOption">Countries/Postcode</em> definition of &ldquo;<strong>GB:EX</strong>&rdquo; and <em>Region</em> 2 should have a definition of &ldquo;<strong>GB</strong>&rdquo;.
<br />
<br />When the customer's address is checked, anyone from Essex - those with a postcode beginning &ldquo;EX&rdquo; - will be shown the Shipping Methods for <em>Region</em> 1, everyone else from the UK will be shown the Shipping Methods for <em>region</em> 2.</p>
<p>To aid in this hierarchical organisation, <em>region</em>s can be <em class="ConfigurationOption">inserted</em> above existing <em>region</em>s, individual <em>region</em>s can be <em class="ConfigurationOption">deleted</em> and <em>region</em>s can be <em class="ConfigurationOption">moved up</em> and <em class="ConfigurationOption">moved down</em> in the hierarchy by using the buttons within each <em>region</em>'s configuration panel on the main Method Configuration page.</p>


<h2>Moving On.. Specifying a Table of Rates</h2>
<p>Once a <em>region</em> has been defined using the above, it must have a <em class="ConfigurationOption">table of rates</em> defined. The description of how these are defined follows in the next section, <a href="configuration_region_rates.html">Region Configuration - Rates Definition</a>.</p>

<p class="TOCLink"><a href="configuration.html">Configuration Table Of Contents</a></p>

<p class="PrevLink"><a href="configuration_product_selection.html">&lt;- Previous - Product Selection</a></p>
<p class="NextLink"><a href="configuration_region_rates.html">Next - Region Configuration - Rates Definition -&gt;</a></p>

<p id="footer"><a href="http://ceon.net" target="_blank"><img src="../_images/ceon_button_logo.png" alt="Ceon" id="ceon_button_logo" /></a>Module &amp; Documentation &copy; Copyright 2007-2009 <a href="http://ceon.net">Ceon</a></p>

	</div>
</div>

<script type="text/javascript">
<!-- // Output resizeable div end tag
restrict_width.outputClosingTag();
// -->
</script>

</body>
</html>
